# セキュリティガイド

## 重要なセキュリティ対策

### 1. 管理者パスワードの設定（必須）

**絶対にデフォルトパスワードを使用しないでください。**

#### Railway での設定

```env
ADMIN_PASSWORD=MyStrongPassword2025!@#
```

#### ローカル開発での設定

```bash
export ADMIN_PASSWORD="MyStrongPassword2025!@#"
./gradlew :server:bootRun
```

### 2. パスワードポリシー

**推奨される強力なパスワード:**
- 最低16文字以上
- 大文字を含む (A-Z)
- 小文字を含む (a-z)
- 数字を含む (0-9)
- 記号を含む (!@#$%^&*)

**避けるべきパスワード:**
- ❌ `admin123`
- ❌ `password`
- ❌ `12345678`
- ❌ 辞書に載っている単語
- ❌ 個人情報（誕生日、名前など）

### 3. 環境変数の管理

#### Railway

1. Variables タブで設定
2. **絶対にコードにコミットしない**
3. チームメンバーには別の方法で共有（1Password、Bitwarden など）

#### ローカル開発

`.env` ファイルを使用（`.gitignore` に追加済み）:

```bash
# .env ファイル
ADMIN_PASSWORD=your-secure-password
```

### 4. 本番環境のチェックリスト

デプロイ前に以下を確認:

- [ ] `ADMIN_PASSWORD` 環境変数が設定されている
- [ ] パスワードが強力である（16文字以上、複雑）
- [ ] デフォルトパスワード (`admin123`) を使用していない
- [ ] パスワードがコードにハードコードされていない
- [ ] `.env` ファイルが `.gitignore` に含まれている

### 5. セキュリティインシデント対応

#### パスワードが漏洩した場合

1. **直ちに** Railway で `ADMIN_PASSWORD` を変更
2. アプリケーションを再起動
3. すべてのユーザーに通知
4. 必要に応じてデータベースをリセット

#### 不審なアクセスを検出した場合

1. Railway のログを確認
2. 不審なユーザーアカウントを削除
3. 管理者パスワードを変更
4. セキュリティ監査を実施

### 6. 将来的な改善案

- [ ] パスワード変更 API の実装
- [ ] アカウントロックアウト機能
- [ ] 2要素認証 (2FA)
- [ ] ログイン試行回数制限
- [ ] セッション管理の改善
- [ ] HTTPS 強制

## 脆弱性報告

セキュリティ上の問題を発見した場合は、公開せずに以下に報告してください:

- GitHub の Security タブ → Report a vulnerability
- または直接開発者に連絡

---

**セキュリティは全員の責任です。このガイドラインに従ってください。**

